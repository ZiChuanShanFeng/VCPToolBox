{
  "manifestVersion": "1.0.0",
  "name": "FileEditor",
  "version": "3.1.0",
  "displayName": "文件编辑器 (智能交互)",
  "description": "一个用于读取、写入、删除和列出文件/目录的通用插件。支持通过 file_type 参数自动定位到 'diary' (日记) 或 'agent' (Agent定义) 文件夹。在删除日记或Agent时，如果未提供具体文件名，可通过 character_name 触发交互式选择流程。",
  "author": "Gemini",
  "pluginType": "synchronous",
  "entryPoint": {
    "type": "nodejs",
    "command": "node FileEditor.js"
  },
  "communication": {
    "protocol": "stdio",
    "timeout": 5000
  },
  "capabilities": {
    "invocationCommands": [
      {
        "commandIdentifier": "ReadFile",
        "description": "读取指定文件的内容.\n参数:\n- command (字符串, 必需): 固定为 'ReadFile'.\n- file_path (字符串, 必需): 要读取的文件的相对路径.\n- file_type (字符串, 可选): 文件类型，可选值为 'diary' 或 'agent'。如果提供，file_path 只需提供相对于该类型文件夹的路径。"
      },
      {
        "commandIdentifier": "WriteFile",
        "description": "向指定文件写入新内容.\n参数:\n- command (字符串, 必需): 固定为 'WriteFile'.\n- file_path (字符串, 必需): 要写入的文件的相对路径.\n- content (字符串, 必需): 要写入的新内容.\n- file_type (字符串, 可选): 文件类型，可选值为 'diary' 或 'agent'。"
      },
      {
        "commandIdentifier": "DeleteFile",
        "description": "删除指定的文件。如果删除日记或Agent时未提供 file_path，可提供 character_name 和 file_type 来列出该分类下的所有文件以供选择.\n参数:\n- command (字符串, 必需): 固定为 'DeleteFile'.\n- file_path (字符串, 可选): 要删除的文件的确切相对路径。如果提供了此项，将直接删除。\n- file_type (字符串, 可选): 文件类型，可选值为 'diary' 或 'agent'。当使用交互式删除时必需。\n- character_name (字符串, 可选): 当未提供file_path时，需要提供此参数来指定目标角色或Agent。"
      },
      {
        "commandIdentifier": "ListDirectory",
        "description": "列出指定目录下的所有文件和子目录.\n参数:\n- command (字符串, 必需): 固定为 'ListDirectory'.\n- dir_path (字符串, 必需): 要列出内容的目录的相对路径.\n- file_type (字符串, 可选): 文件类型，可选值为 'diary' 或 'agent'。"
      }
    ]
  }
}

// VCP 调用格式示例
/*
// 交互式删除日记 (第一步: 列出文件)
<<<[TOOL_REQUEST]>>>
tool_name:「始」FileEditor「末」,
command:「始」DeleteFile「末」,
file_type:「始」diary「末」,
character_name:「始」zhuchiren「末」
<<<[END_TOOL_REQUEST]>>>

// 交互式删除Agent (第一步: 列出文件)
<<<[TOOL_REQUEST]>>>
tool_name:「始」FileEditor「末」,
command:「始」DeleteFile「末」,
file_type:「始」agent「末」,
character_name:「始」Nova「末」
<<<[END_TOOL_REQUEST]>>>

// 精确删除文件 (第二步)
<<<[TOOL_REQUEST]>>>
tool_name:「始」FileEditor「末」,
command:「始」DeleteFile「末」,
file_type:「始」diary「末」,
file_path:「始」dailynote/zhuchiren/2025.07.23.txt「末」
<<<[END_TOOL_REQUEST]>>>
*/